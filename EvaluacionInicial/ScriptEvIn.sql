
--               /SUPERMERCADO\              -- 

--CREACION--
CREATE TABLE SECCION(
ID_SECCION NUMBER(2) PRIMARY KEY,
NOMBRE VARCHAR2(30)
);

CREATE TABLE PRODUCTO(
ID_PRODUCTO VARCHAR2(9) PRIMARY KEY,
NOMBRE VARCHAR2(30) NOT NULL,
SECCION NUMBER(2) NOT NULL REFERENCES SECCION ON DELETE CASCADE,
PRECIO NUMBER(4,2) NOT NULL
);

CREATE TABLE CAJA(
ID_CAJA NUMBER(2) PRIMARY KEY
);

CREATE TABLE TRABAJADOR_CAJERO(
NOMBRE VARCHAR2(30) NOT NULL,
DNI VARCHAR2(9) PRIMARY KEY,
SUELDO NUMBER(6,2) NOT NULL,
CAJA NUMBER(2) NOT NULL REFERENCES CAJA ON DELETE CASCADE
);

CREATE TABLE TRABAJADOR_ALMACEN(
NOMBRE VARCHAR2(30) NOT NULL,
DNI VARCHAR2(9) PRIMARY KEY,
SUELDO NUMBER(6,2) NOT NULL
);


--CREACION--





--INSERCION--

INSERT INTO SECCION VALUES(1,'Carniceria');
INSERT INTO SECCION VALUES(2,'Pescaderia');
INSERT INTO SECCION VALUES(3,'Limpieza');
INSERT INTO SECCION VALUES(4,'Congelados');


INSERT INTO PRODUCTO VALUES('1','Pollo Entero',1,4.5);
INSERT INTO PRODUCTO VALUES('2','Flamenquin Cordobes',1,4);
INSERT INTO PRODUCTO VALUES('3','Solomillo',1,6.75);

INSERT INTO PRODUCTO VALUES('4','Salmon',3,8.63);
INSERT INTO PRODUCTO VALUES('5','6 uds lata atun',2,5);
INSERT INTO PRODUCTO VALUES('6','500g gambas',2,10.2);

INSERT INTO PRODUCTO VALUES('7','Fairy',3,4.5);
INSERT INTO PRODUCTO VALUES('8','Don Limpio',3,4.5);
INSERT INTO PRODUCTO VALUES('9','Paquete mopas',3,4.5);

INSERT INTO PRODUCTO VALUES('10','Croquetas jamon',4,4.5);
INSERT INTO PRODUCTO VALUES('11','Pizza',4,4.5);
INSERT INTO PRODUCTO VALUES('12','Patatas francesas',4,4.5);

INSERT INTO CAJA VALUES(1);
INSERT INTO CAJA VALUES(2);
INSERT INTO CAJA VALUES(3);
INSERT INTO CAJA VALUES(4);
INSERT INTO CAJA VALUES(5);
INSERT INTO CAJA VALUES(6);

INSERT INTO TRABAJADOR_CAJERO VALUES('Pepe Perez','12345678A',1050.50,1);
INSERT INTO TRABAJADOR_CAJERO VALUES('Felix Rodriguez','13333333B',1050.50,2);
INSERT INTO TRABAJADOR_CAJERO VALUES('Rasputin Gonzalez','14444444C',1050.50,3);


INSERT INTO TRABAJADOR_ALMACEN VALUES('Antonio AntoÃ±ez','25555555A',950.50);
INSERT INTO TRABAJADOR_ALMACEN VALUES('Luis Lopez','26666666B',950.50);
INSERT INTO TRABAJADOR_ALMACEN VALUES('Rafael Ramirez','27777777C',950.50);

--INSERCION--





--CONSULTA--

SELECT p.NOMBRE
FROM PRODUCTO p
WHERE p.SECCION=2;

SELECT p.NOMBRE
FROM PRODUCTO p 
WHERE p.SECCION=(
				SELECT S.ID_SECCION
				FROM SECCION s
				WHERE S.NOMBRE='Carniceria'
);


SELECT p.ID_PRODUCTO AS ID, p.NOMBRE AS Nombre
FROM PRODUCTO p 
WHERE p.precio>=(
				SELECT AVG(p.precio)
				FROM PRODUCTO p
);

SELECT NOMBRE, DNI
FROM TRABAJADOR_CAJERO
WHERE DNI LIKE '%56%' ;

SELECT COUNT(NOMBRE),PRECIO
FROM PRODUCTO
GROUP BY PRECIO
ORDER BY PRECIO;

--CONSULTA--



--MODIFICACION--

UPDATE TRABAJADOR_ALMACEN
SET SUELDO=SUELDO+SUELDO*0.1
WHERE SUELDO<1000;

UPDATE PRODUCTO
SET SECCION=2
WHERE NOMBRE='Salmon';

ALTER TABLE TRABAJADOR_CAJERO
ADD ANTIGUEDAD NUMBER(4); 

UPDATE TRABAJADOR_CAJERO 
SET ANTIGUEDAD=1
WHERE ANTIGUEDAD IS NULL;

DELETE FROM PRODUCTO p
WHERE ID_PRODUCTO=3;

--MODIFICACION--





--DROP--

--DROP TABLE PRODUCTO;
--DROP TABLE TRABAJADOR_CAJERO;
--DROP TABLE TRABAJADOR_ALMACEN;
--DROP TABLE SECCION;
--DROP TABLE CAJA;

--DROP--


